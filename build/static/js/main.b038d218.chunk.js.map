{"version":3,"sources":["components/InputField.js","components/Form.js","components/Person.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["InputField","htmlFor","label","type","value","onChange","className","id","Form","onSubmit","newName","handleNameChange","newNumber","handleNumberChange","Person","person","handleDelete","name","number","onClick","Persons","filter","persons","filteredPersons","map","baseUrl","axios","get","then","response","data","newObject","post","delete","put","Notification","message","App","useState","setPersons","setNewName","setNewNumber","setFilter","setFilteredPersons","notificationMessage","setNotificationMessage","useEffect","personService","initialPersons","notification","error","event","target","filtered","toLowerCase","includes","preventDefault","newPerson","alreadyExists","some","find","p","changedPerson","setTimeout","window","confirm","returnedPerson","catch","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b038d218.chunk.js","sourcesContent":["import React from \"react\";\n\nconst InputField = ({ htmlFor, label, type, value, onChange }) => (\n  <div>\n    {/* Add label with htmlFor for accessibility, id on input associates label with input element */}\n    <label className=\"label\" htmlFor={htmlFor}>\n      {label}\n    </label>\n    <input\n      type={type}\n      className=\"input\"\n      id={htmlFor}\n      value={value}\n      onChange={onChange}\n    />\n  </div>\n);\n\nexport default InputField;\n","import React from \"react\";\nimport InputField from \"./InputField\";\n\nconst Form = ({\n  onSubmit,\n  newName,\n  handleNameChange,\n  newNumber,\n  handleNumberChange\n}) => (\n  <form onSubmit={onSubmit}>\n    <InputField\n      label=\"Name:\"\n      htmlFor=\"name\"\n      type=\"text\"\n      value={newName}\n      onChange={handleNameChange}\n    />\n\n    <InputField\n      label=\"Number:\"\n      htmlFor=\"number\"\n      value={newNumber}\n      onChange={handleNumberChange}\n    />\n    <div>\n      <button className=\"button submit\" type=\"submit\">\n        Add\n      </button>\n    </div>\n  </form>\n);\n\nexport default Form;","import React from \"react\";\n\nconst Person = ({ person, handleDelete }) => (\n  <div className=\"person\">\n    <span className=\"person--name\">{person.name}</span>\n    <span className=\"person--number\">{person.number}</span>\n    <button className=\"button\" onClick={() => handleDelete(person.id)}>\n      Delete\n    </button>\n  </div>\n);\n\nexport default Person;","import React from \"react\";\nimport Person from \"./Person\";\n\nconst Persons = ({ filter, persons, filteredPersons, handleDelete }) => (\n  <div className=\"persons\">\n    {filter === \"\"\n      ? persons?.map(person => (\n          <Person\n            key={person.name}\n            person={person}\n            handleDelete={handleDelete}\n          />\n        ))\n      : filteredPersons?.map(person => (\n          <Person\n            key={person.name}\n            person={person}\n            handleDelete={handleDelete}\n          />\n        ))}\n  </div>\n);\n\nexport default Persons;","import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then(response => response.data);\n};\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then(response => response.data);\n};\n\nconst deletePerson = id => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then(response => response.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then(response => response.data);\n};\n\nexport default { getAll, create, deletePerson, update };","import React from \"react\";\n\nconst Notification = ({ message, className }) => {\n  // Check for null or undefined with == instead of ===\n  if (message == null) {\n    return null;\n  }\n\n  return <div className={className}>{message}</div>;\n};\n\nexport default Notification;","import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport InputField from \"./components/InputField\";\nimport Form from \"./components/Form\";\nimport Persons from \"./components/Persons\";\nimport personService from \"./services/persons\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [filteredPersons, setFilteredPersons] = useState(null);\n  const [notificationMessage, setNotificationMessage] = useState(null);\n\n  // Fetch person data from json-server\n  useEffect(() => {\n    personService.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilter = (event) => {\n    setFilter(event.target.value);\n    const filtered = persons.filter((person) =>\n      // Check if the search term is included in the names in the phonebook\n      person.name.toLowerCase().includes(event.target.value.toLowerCase())\n    );\n\n    setFilteredPersons(filtered);\n  };\n\n  // submit form\n  const addPerson = (event) => {\n    event.preventDefault();\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n    };\n\n    // Check if person is already added to the phoneboook.\n    const alreadyExists = persons.some((person) => person.name === newName);\n\n    // No name provided --> could be handled by displaying an error\n    // For now do nothing.\n    if (newName === \"\") {\n      return;\n    }\n\n    if (alreadyExists) {\n      const person = persons.find((p) => p.name === newName);\n      const changedPerson = { ...person, number: newNumber };\n      const { id } = person;\n\n      // Error handling for if the updated number is too short.\n      if (newNumber < 8) {\n        setNotificationMessage({\n          error: `${newNumber} is too short, please provide a number with at least 8 digits`,\n        });\n        setTimeout(() => {\n          setNotificationMessage(null);\n        }, 5000);\n        return;\n      }\n\n      const confirmUpdate = window.confirm(\n        `${newName} is already added to phonebook, replace the old number with a new one?`\n      );\n\n      if (confirmUpdate) {\n        personService\n          .update(id, changedPerson)\n          .then((returnedPerson) => {\n            // Update number in state\n            setPersons(\n              persons.map((person) =>\n                person.id !== id ? person : returnedPerson\n              )\n            );\n\n            setNotificationMessage({\n              notification: `Updated number for ${person.name}`,\n            });\n            setTimeout(() => {\n              setNotificationMessage(null);\n            }, 5000);\n          })\n          .catch((error) => {\n            setNotificationMessage({\n              error: `Information for ${person.name} has already been removed from server`,\n            });\n            setPersons(persons.filter((p) => p.id !== id));\n            setTimeout(() => {\n              setNotificationMessage(null);\n            }, 5000);\n          });\n      }\n      // clear input fields\n      setNewName(\"\");\n      setNewNumber(\"\");\n      return;\n    }\n\n    personService\n      .create(newPerson)\n      .then((returnedPerson) => {\n        setPersons(persons.concat(returnedPerson));\n\n        setNotificationMessage({\n          notification: `Added ${returnedPerson.name}`,\n        });\n        setTimeout(() => {\n          setNotificationMessage(null);\n        }, 5000);\n\n        // clear input fields\n        setNewName(\"\");\n        setNewNumber(\"\");\n      })\n      .catch((error) => {\n        setNotificationMessage(error.response.data);\n        setTimeout(() => {\n          setNotificationMessage(null);\n        }, 5000);\n      });\n  };\n\n  const handleDelete = (id) => {\n    const person = persons.find((p) => p.id === id);\n    const confirmDelete = window.confirm(`Delete ${person.name}?`);\n    if (confirmDelete) {\n      personService.deletePerson(id).then(() => {\n        //Update state --> filter out deleted person\n        const filteredPersons = persons.filter((person) => person.id !== id);\n        setPersons(filteredPersons);\n\n        // reset filter\n        setFilter(\"\");\n      });\n    }\n  };\n\n  return (\n    <main className=\"container\">\n      <h1>Phonebook</h1>\n      <Notification\n        message={\n          notificationMessage?.notification || notificationMessage?.error\n        }\n        className={notificationMessage?.notification ? \"notification\" : \"error\"}\n      />\n\n      {/* Filter by name */}\n      <InputField\n        label=\"Filter shown with\"\n        htmlFor=\"filter\"\n        type=\"text\"\n        value={filter}\n        onChange={handleFilter}\n      />\n\n      <h2>Add a new</h2>\n      <Form\n        onSubmit={addPerson}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        filter={filter}\n        persons={persons}\n        filteredPersons={filteredPersons}\n        handleDelete={handleDelete}\n      />\n    </main>\n  );\n};\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);"],"sourceRoot":""}